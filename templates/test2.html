<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <h1>Exhibition on {{min_county}}</h1>
 
    <style type="text/css">
 
        body {
            margin: 0 auto;
        }
 
        #show {
            margin: 50px auto;
            width: 450px;
            font-size: 14px;
        }
 
        .content {
            float: left;
            width: 450px;
            margin: 40px 10px 50px 50px;
        }
 
        .bigfont {
            font-size: 40px;
        }
 
        .la {
            float: left;
            width: 500px;
            height: 20px;
            margin: 20px 0;
            line-height: 30px;
        }
 
        .la input {
            float: left;
        }
 
        .la span {
            float: left;
            line-height: 20px;
        }
 
    </style>

    
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js"></script>
 
    <script type="text/javascript">
    
        var data = JSON.parse('{{ recommand_county | tojson|safe}}');

        window.onload = function () {
            var years = ['{{min_county}}'];
          
            
    
            var months = 
            {
                '{{min_county}}': data
            }; 
                
            var yearMonth = [years, months];
            genCheck(yearMonth);
        }
 
 
        function genCheck(yearMonth) {
            var content = "content";
            var checkText = "checkbox";
            var link = "link";
            var size;
 
            $("#show").html("");
 
            var years = yearMonth[0];
            size = years.length;
            for (var i = 0; i < years.length; i++) {
                genShowContent("show", checkText + i, i, years[i] , content + i);
            }
            var monthObj = yearMonth[1];
 
            for (var i = 0; i < years.length; i++) {
                var array = monthObj[""+years[i]+""];
                for (var j = 0; j < array.length; j++) {
                    genCheckBox(content + i, link + i, array[j].title, array[j].title+array[j].location , i, false);
                }
 
                var flag = isAllCheck(link + i);
                var box = document.getElementById(checkText + i);
                if (flag) {
                    box.checked = true;
                } else {
                    box.checked = false;
                }
                $("input[name=" + link + i + "]").each(function () {
                    $(this).unbind();
                    $(this).change(function () {
                        var flag = isAllCheck($(this).attr("name"));
                        var box = document.getElementById(checkText + $(this).attr("parentIndex"));
                        if (flag) {
                            box.checked = true;
                        } else {
                            box.checked = false;
                        }
                    });
                });
            }
            for (var i = 0; i < size; i++) {
                $("#" + checkText + i).unbind();
                $("#" + checkText + i).change(function () {
                    var temp = link + $(this).attr("index");
                    var p = document.getElementById(checkText + $(this).attr("index"));
                    var box = document.getElementsByName(temp);
                    for (var j = 0; j < box.length; j++) {
                        if (p.checked) {
                            box[j].checked = true;
                        } else {
                            box[j].checked = false;
                        }
                    }
                });
            }
        }
 
 
        function genCheckBox(id, name, value, showText, parentIndex, isCheck) {
            if (!isCheck) {
                var checkbox = "<div class='la'><input type='checkbox' parentIndex=" + parentIndex + " name=".concat(name).concat(" value=").concat(value).concat(" alt=").concat(showText).concat(" /><span>").concat(showText).concat("</span></div>");
                $("#" + id).append(checkbox);
            } else {
                var checkbox = "<div class='la'><input type='checkbox' parentIndex=" + parentIndex + " name=".concat(name).concat(" checked='checked' value=").concat(value).concat(" alt=").concat(showText).concat(" /><span>").concat(showText).concat("</span></div>");
                $("#" + id).append(checkbox);
            }
        }
 
 
        function genShowContent(id, checkboxId, index, showText, idName) {
            var showContent = "<div class='msg'><span class='bigfont'>".concat(showText).concat("： </span><input type='checkbox' index=").concat(index).concat(" id='").concat(checkboxId).concat("'/><span>全选</span><div class='content' id='").concat(idName).concat("' ></div></div>");
            $("#" + id).append(showContent);
        }
 
 
        function isAllCheck(name) {
            var box = document.getElementsByName(name);
            for (var j = 0; j < box.length; j++) {
                if (!box[j].checked) {
                    return false;
                }
            }
            return true;
        }
    </script>
</head>
<body>
<div class="show" id="show"></div>
</body>
