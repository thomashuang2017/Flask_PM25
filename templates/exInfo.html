{% extends 'layout.html' %}

{% block body %}
<br></br>
<style type="text/css">
	/* <!-- 折線圖import --> */
	 #flot-placeholder{width:775px;height:300px;}
  /* 表格Css */
	table.TB_COLLAPSE {
		width:100%;
		border-collapse:collapse;
	}
	table.TB_COLLAPSE caption {
		padding:10px;
		font-size:24px;
		background-color:#f3f6f9;
	}
	table.TB_COLLAPSE thead th {
		padding:5px 0px;
		color:#fff;
		text-align:center;
		background-color:#915957;
	}
	table.TB_COLLAPSE tbody td {
		padding:5px 0px;
		color:#555;
		text-align:center;
		background-color:#fff;
		border-bottom:1px solid #915957;
	}
	table.TB_COLLAPSE tfoot td {
		padding:5px 0px;
		text-align:center;
		background-color:#d6d6a5;
	}
</style>
<!--[if lte IE 8]><script language="javascript" type="text/javascript" src="http://www.pureexample.com/js/flot/excanvas.min.js"></script><![endif]-->
<script type="text/javascript" src="http://www.pureexample.com/js/lib/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="http://www.pureexample.com/js/flot/jquery.flot.min.js"></script>
<script type="text/javascript">
	var d = new Date();
	var now_hour = d.getHours();

	var plot_pm = JSON.parse('{{ past_pm | tojson|safe}}');


	if(now_hour%9==0){
		var pm0= plot_pm[0].pm1
		var pm1= plot_pm[0].pm2
		var pm2= plot_pm[0].pm3
		var pm3= plot_pm[0].pm4
		var pm4= plot_pm[0].pm5
		var pm5= plot_pm[0].pm6
		var pm6= plot_pm[0].pm7
		var pm7= plot_pm[0].pm8
		var pm8= plot_pm[0].pm0
	}
	if(now_hour%9==1){
		var pm0= plot_pm[0].pm2
		var pm1= plot_pm[0].pm3
		var pm2= plot_pm[0].pm4
		var pm3= plot_pm[0].pm5
		var pm4= plot_pm[0].pm6
		var pm5= plot_pm[0].pm7
		var pm6= plot_pm[0].pm8
		var pm7= plot_pm[0].pm0
		var pm8= plot_pm[0].pm1
	}
	if(now_hour%9==2){
		var pm0= plot_pm[0].pm3
		var pm1= plot_pm[0].pm4
		var pm2= plot_pm[0].pm5
		var pm3= plot_pm[0].pm6
		var pm4= plot_pm[0].pm7
		var pm5= plot_pm[0].pm8
		var pm6= plot_pm[0].pm0
		var pm7= plot_pm[0].pm1
		var pm8= plot_pm[0].pm2
	}
	if(now_hour%9==3){
		var pm0= plot_pm[0].pm4
		var pm1= plot_pm[0].pm5
		var pm2= plot_pm[0].pm6
		var pm3= plot_pm[0].pm7
		var pm4= plot_pm[0].pm8
		var pm5= plot_pm[0].pm0
		var pm6= plot_pm[0].pm1
		var pm7= plot_pm[0].pm2
		var pm8= plot_pm[0].pm3
	}
	if(now_hour%9==4){
		var pm0= plot_pm[0].pm5
		var pm1= plot_pm[0].pm6
		var pm2= plot_pm[0].pm7
		var pm3= plot_pm[0].pm8
		var pm4= plot_pm[0].pm0
		var pm5= plot_pm[0].pm1
		var pm6= plot_pm[0].pm2
		var pm7= plot_pm[0].pm3
		var pm8= plot_pm[0].pm4
	}
	if(now_hour%9==5){
		var pm0= plot_pm[0].pm6
		var pm1= plot_pm[0].pm7
		var pm2= plot_pm[0].pm8
		var pm3= plot_pm[0].pm0
		var pm4= plot_pm[0].pm1
		var pm5= plot_pm[0].pm2
		var pm6= plot_pm[0].pm3
		var pm7= plot_pm[0].pm4
		var pm8= plot_pm[0].pm5
	}
	if(now_hour%9==6){
		var pm0= plot_pm[0].pm7
		var pm1= plot_pm[0].pm8
		var pm2= plot_pm[0].pm0
		var pm3= plot_pm[0].pm1
		var pm4= plot_pm[0].pm2
		var pm5= plot_pm[0].pm3
		var pm6= plot_pm[0].pm4
		var pm7= plot_pm[0].pm5
		var pm8= plot_pm[0].pm6
	}
	if(now_hour%9==7){
		var pm0= plot_pm[0].pm8
		var pm1= plot_pm[0].pm0
		var pm2= plot_pm[0].pm1
		var pm3= plot_pm[0].pm2
		var pm4= plot_pm[0].pm3
		var pm5= plot_pm[0].pm4
		var pm6= plot_pm[0].pm5
		var pm7= plot_pm[0].pm6
		var pm8= plot_pm[0].pm7
	}
	if(now_hour%9==8){
		var pm0= plot_pm[0].pm0
		var pm1= plot_pm[0].pm1
		var pm2= plot_pm[0].pm2
		var pm3= plot_pm[0].pm3
		var pm4= plot_pm[0].pm4
		var pm5= plot_pm[0].pm5
		var pm6= plot_pm[0].pm6
		var pm7= plot_pm[0].pm7
		var pm8= plot_pm[0].pm8
	}






	 var data = [[1, 50], [2, 200], [4, 5], [5, 50], [6,70], [7, 80], [8,9], [9,100], [10, 100]];

	 var dataset = [{label: "{{county}}"+"pm2.5",data: data}];

	 var options = {
			 series: {
					 lines: { show: true },
					 points: {
							 radius: 3,
							 show: true
					 }
			 }
	 };

	 $(document).ready(function () {
			 $.plot($("#flot-placeholder"), dataset, options);
	 });
	 // 折線圖

   // 展覽切割
	 var data = JSON.parse('{{ exinfo | tojson|safe}}');
	  document.write('<br></br><h3>{{county}} 現在的PM2.5是{{pm}}</h3>')
		document.write('<div id="flot-placeholder"></div>')
    document.write('<h3>{{county}} 展覽活動</h3>')
	  document.write('<table class="TB_COLLAPSE"><thead><tr><th>書籤</th><th>活動</th><th>地址</th><th>地點</th><th>結束時間</th></tr></thead>')

  for (var i in data)
  {
	 document.write('<tr>')
	 document.write('<td>')
	 document.write('<button type="button" class="btn btn-outline-primary">Primary</button>')
	 document.write('</td>')
	 document.write('<td>')
   document.write(data[i].title)
	 document.write('</td>')
	 document.write('<td>')
   document.write(data[i].location)
	 document.write('</td>')
	 document.write('<td>')
	 document.write(data[i].locationName)
	 document.write('</td>')
	 document.write('<td>')
	 document.write(data[i].endTime)
	 document.write('</td>')
   document.write('</tr>')

  }
	 document.write('</table>')
	 // 展覽切割

</script>
{{past_pm}}
<br></br>

{% endblock %}
