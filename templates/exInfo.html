{%extends 'layout.html'%}

{% block body %}
<br></br>
<style type="text/css">
	.ch {
display: block;
position: relative;
padding-left: 35px;
margin-bottom: 12px;
cursor: pointer;
font-size: 22px;
-webkit-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
}

/* Hide the browser's default checkbox */
.ch input {
position: absolute;
opacity: 0;
cursor: pointer;
height: 0;
width: 0;
}

/* Create a custom checkbox */
.checkmark {
position: absolute;
top: 0;
left: 0;
height: 25px;
width: 25px;
background-color: #eee;
}

/* On mouse-over, add a grey background color */
.ch:hover input ~ .checkmark {
background-color: #ccc;
}

/* When the checkbox is checked, add a blue background */
.ch input:checked ~ .checkmark {
background-color: #2196F3;
}

/* Create the checkmark/indicator (hidden when not checked) */
.checkmark:after {
content: "";
position: absolute;
display: none;
}

/* Show the checkmark when checked */
.ch input:checked ~ .checkmark:after {
display: block;
}

/* Style the checkmark/indicator */
.ch .checkmark:after {
left: 9px;
top: 5px;
width: 5px;
height: 10px;
border: solid white;
border-width: 0 3px 3px 0;
-webkit-transform: rotate(45deg);
-ms-transform: rotate(45deg);
transform: rotate(45deg);
}

#flotcontainer {
    width: 1100px;
    height: 200px;
    text-align: center;
    margin: 0 auto;
}


  /* 表格Css */
	table.TB_COLLAPSE {
		width:100%;
		border-collapse:collapse;
	}
	table.TB_COLLAPSE caption {
		padding:10px;
		font-size:24px;
		background-color:#f3f6f9;
	}
	table.TB_COLLAPSE thead th {
		padding:5px 0px;
		color:#fff;
		text-align:center;
		background-color:#915957;
	}
	table.TB_COLLAPSE tbody td {
		padding:5px 0px;
		color:#555;
		text-align:center;
		background-color:#fff;
		border-bottom:1px solid #915957;
	}
	table.TB_COLLAPSE tfoot td {
		padding:5px 0px;
		text-align:center;
		background-color:#d6d6a5;
	}
</style>
<form method="post">
<script type="text/javascript">

var d=new Date();
var currentDateTime =d.getTime();
	var now_hour = d.getHours();
	var plot_pm = JSON.parse('{{ past_pm | tojson|safe}}');

    switch(now_hour%9)
    {
        case 0:
            var pm0= plot_pm[0].pm1
    		var pm1= plot_pm[0].pm2
    		var pm2= plot_pm[0].pm3
    		var pm3= plot_pm[0].pm4
    		var pm4= plot_pm[0].pm5
    		var pm5= plot_pm[0].pm6
    		var pm6= plot_pm[0].pm7
    		var pm7= plot_pm[0].pm8
    		var pm8= plot_pm[0].pm0
    		break;
    	case 1:
    		var pm0= plot_pm[0].pm2
    		var pm1= plot_pm[0].pm3
    		var pm2= plot_pm[0].pm4
    		var pm3= plot_pm[0].pm5
    		var pm4= plot_pm[0].pm6
    		var pm5= plot_pm[0].pm7
    		var pm6= plot_pm[0].pm8
    		var pm7= plot_pm[0].pm0
    		var pm8= plot_pm[0].pm1
    		break;
    	case 2:
    		var pm0= plot_pm[0].pm3
    		var pm1= plot_pm[0].pm4
    		var pm2= plot_pm[0].pm5
    		var pm3= plot_pm[0].pm6
    		var pm4= plot_pm[0].pm7
    		var pm5= plot_pm[0].pm8
    		var pm6= plot_pm[0].pm0
    		var pm7= plot_pm[0].pm1
    		var pm8= plot_pm[0].pm2
    		break;
    	case 3:
    		var pm0= plot_pm[0].pm4
    		var pm1= plot_pm[0].pm5
    		var pm2= plot_pm[0].pm6
    		var pm3= plot_pm[0].pm7
    		var pm4= plot_pm[0].pm8
    		var pm5= plot_pm[0].pm0
    		var pm6= plot_pm[0].pm1
    		var pm7= plot_pm[0].pm2
    		var pm8= plot_pm[0].pm3
    		break;
        case 4:
    		var pm0= plot_pm[0].pm5
    		var pm1= plot_pm[0].pm6
    		var pm2= plot_pm[0].pm7
    		var pm3= plot_pm[0].pm8
    		var pm4= plot_pm[0].pm0
    		var pm5= plot_pm[0].pm1
    		var pm6= plot_pm[0].pm2
    		var pm7= plot_pm[0].pm3
    		var pm8= plot_pm[0].pm4
    		break;
    	case 5:
    		var pm0= plot_pm[0].pm6
    		var pm1= plot_pm[0].pm7
    		var pm2= plot_pm[0].pm8
    		var pm3= plot_pm[0].pm0
    		var pm4= plot_pm[0].pm1
    		var pm5= plot_pm[0].pm2
    		var pm6= plot_pm[0].pm3
    		var pm7= plot_pm[0].pm4
    		var pm8= plot_pm[0].pm5
    		break;
    	case 6:
    		var pm0= plot_pm[0].pm7
    		var pm1= plot_pm[0].pm8
    		var pm2= plot_pm[0].pm0
    		var pm3= plot_pm[0].pm1
    		var pm4= plot_pm[0].pm2
    		var pm5= plot_pm[0].pm3
    		var pm6= plot_pm[0].pm4
    		var pm7= plot_pm[0].pm5
    		var pm8= plot_pm[0].pm6
    		break;
    	case 7:
    		var pm0= plot_pm[0].pm8
    		var pm1= plot_pm[0].pm0
    		var pm2= plot_pm[0].pm1
    		var pm3= plot_pm[0].pm2
    		var pm4= plot_pm[0].pm3
    		var pm5= plot_pm[0].pm4
    		var pm6= plot_pm[0].pm5
    		var pm7= plot_pm[0].pm6
    		var pm8= plot_pm[0].pm7
    		break;
    	case 8:
    		var pm0= plot_pm[0].pm0
    		var pm1= plot_pm[0].pm1
    		var pm2= plot_pm[0].pm2
    		var pm3= plot_pm[0].pm3
    		var pm4= plot_pm[0].pm4
    		var pm5= plot_pm[0].pm5
    		var pm6= plot_pm[0].pm6
    		var pm7= plot_pm[0].pm7
    		var pm8= plot_pm[0].pm8
    		break;
	}

	 
	 // 折線圖
    var county = JSON.stringify('{{ county | tojson|safe}}');
		// var s = new String(county);
		if(county == '"\\"臺北市\\""'){
			var dragon=[[313, '千年萬象~敦煌文化藝術展','臺北市大安區忠孝東路三段一號','國立臺北科技大學 藝文中心','2019/01/16'],[322,'福爾摩沙-南風，藝境：亞太當代藝術展','臺北市中正區南海路47號','國立臺灣藝術教育館','2019/06/26'],[322,'福爾摩沙-南風，藝境：亞太當代藝術展','臺北市中正區南海路47號','國立臺灣藝術教育館','2019/06/26'],[348,'臺大遠山 ── 臺大創校九十週年系列活動','臺北市羅斯福路四段一號','臺大農業陳列館、雅頌坊','2019/01/06'],[364,'2018西藏文化藝術節：雪域光影 西藏攝影作品聯展','臺北市大安區青田街八巷三號','蒙藏文化中心','2019/01/31']]
			document.write('<br><h3 class="text-uppercase mb-1">{{county}}</h3>')
			document.write('<div id="flotcontainer"></div>')
			document.write('<h3 class="text-uppercase mb-1">Exhibition</h3>')
			document.write('<button type="submit" class="btn btn-outline-primary"><b>Insert Favorite</b></button>')
			document.write('<table class="TB_COLLAPSE"><thead><tr><th>書籤</th><th>活動</th><th>地址</th><th>地點</th><th>結束時間</th></tr></thead>')
		for (var i=0;i<dragon.length;i++)
		{
		 document.write('<tr><td><label class="ch"><input type="checkbox" name="exinfo_id_list" value='+dragon[i][0]+'><span class="checkmark"></span></label></td>')
		 document.write('<td>'+dragon[i][1]+'</td><td>'+dragon[i][2]+'</td><td>'+dragon[i][3]+'</td><td>'+dragon[i][4]+'</td></tr>')
		}
		document.write('</form>');
		document.write('</table>')

		}
		else{
            var data = JSON.parse('{{ exinfo | tojson|safe}}');
            document.write('<br><h3 class="text-uppercase mb-1">{{county}}</h3>')
            document.write('<div id="flotcontainer"></div>')
            document.write('<h3 class="text-uppercase mb-1">Exhibition</h3>')
            document.write('<button type="submit" class="btn btn-outline-primary"><b>Insert Favorite</b></button>')
            document.write('<table class="TB_COLLAPSE"><thead><tr><th>書籤</th><th>活動</th><th>地址</th><th>地點</th><th>結束時間</th></tr></thead>')
            for (var i in data)
            {
                document.write('<tr><td><label class="ch"><input type="checkbox" name="exinfo_id_list" value='+data[i].ex_id+'><span class="checkmark"></span></label></td>')
                document.write('<td>'+data[i].title+'</td><td>'+data[i].location+'</td><td>'+data[i].locationName+'</td><td>'+data[i].endTime+'</td></tr>')
            
            }
            document.write('</form>');
            document.write('</table>')
        }
    var data7_1 = [
	     [currentDateTime, pm0], [currentDateTime+3600000, pm1], [currentDateTime+7200000, pm2],
	     [currentDateTime+10800000, pm3], [currentDateTime+14400000, pm4], [currentDateTime+18000000, pm5],
	     [currentDateTime+21600000, pm6], [currentDateTime+25200000, pm7], [currentDateTime+28800000, pm8]
	 ];

	 $(function () {
	     $.plot($("#flotcontainer"),
	         [
	             {
	               data: data7_1,
	               label: "PM2.5",
	               lines: { fill: true}

	             }
	         ],
	         {
	             grid: {
	                 backgroundColor: { colors: ["#D1D1D1", "#7A7A7A"] }
	             },
	             xaxis: {
	                 mode: "time",
	                 timeformat: "%0m/%0d %0H:%0M"
	             }
	         }
	     );
	 });
    </script>
    
   
    </form>
{% endblock %}
